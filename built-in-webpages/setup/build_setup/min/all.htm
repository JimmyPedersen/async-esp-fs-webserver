<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8>
    <title>Air power - Configuration</title>
    <meta content="width=device-width, initial-scale=1" name=viewport>
    <style>html{font-family:sans-serif}body{background-color:#fff;padding:20px}hr{padding:0}details,main,summary{display:block}a{background-color:transparent}a:active,a:hover{outline:0}b{font-weight:700}h1{font-size:36px;margin:10px 0 5px}h2{font-size:24px}input:-webkit-autofill,input:-webkit-autofill:active,input:-webkit-autofill:focus,input:-webkit-autofill:hover{-webkit-box-shadow:inset 0 0 0 30px #fff!important}input[type=checkbox]{box-sizing:border-box;padding:0}input[type=number],input[type=password],input[type=text],select{border:1px solid #ccc;border-radius:6px;font-size:16px;height:40px;padding:0 0 0 20px;width:90%}input[type=file]{display:none}input::placeholder{color:#5e5e5e}input:hover{border-color:rgba(0,0,0,.8);box-shadow:0 1px 4px 0 rgba(220,220,229,.9)}input:focus,select:focus{border-color:#3898ec;outline:0}input[type=number]:hover::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield}footer{display:none;font-size:12px;margin:40px;text-align:center}.btn,button{background-color:#4a6588;border:0;border-radius:5px;color:#fff;cursor:pointer;display:inline-flex;justify-content:center;min-width:40%;padding:10px 15px}.btn:hover,button:hover{filter:brightness(85%)}ul{display:table;margin:0 auto 10px;text-align:left}hr{order:997;width:100%}select{width:92.5%}.input-label{align-self:self-start;background-color:#fff;border:1px solid #ccc;border-radius:6px;bottom:-5px;color:#015293;font-size:13.5px;left:5%;padding:2px 10px 0;position:relative}.input-label:hover{border-color:rgba(0,0,0,.8)}.esp-info{margin-bottom:12px;text-align:center}.row-wrapper{align-items:baseline;display:flex;flex-wrap:nowrap;gap:20px}.loading{color:#ffffff9e;text-align:center}.loader{height:auto;overflow:hidden;position:relative}.spinH{background:#ffffff2b;border-radius:100%;height:8px;position:absolute;top:50%;width:8px}.spin-1H{animation:spinnerH 3s linear infinite}.spin-2H{animation:spinnerH 3s linear .1s infinite}.spin-3H{animation:spinnerH 3s linear .2s infinite}.spin-4H{animation:spinnerH 3s linear .3s infinite}@keyframes spinnerH{0%{transform:translateX(0)}20%{transform:translate(200px)}70%{transform:translateX(505px)}to{transform:translateX(800px)}}.progress-wrap{background:#9e9e9e7d;font-size:20px;height:25px;margin:20px auto;position:relative;text-align:center;transition:all .4s ease;width:60%}.progress-wrap:not(.active){background:#9e9e9e00;cursor:pointer}.progress-wrap .progress{background:#9e9e9ea1;opacity:0;transition:all .3s ease;width:0;z-index:5}.progress-wrap.active .progress{animation:progress-anim 10s ease 0s;opacity:1}.progress-wrap[data-progress-style=fill-back] .progress{bottom:0;left:0;position:absolute;right:0;top:0}.d-modal{background-color:rgba(96,125,139,.9);border:1px solid #3333336e;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,.24);flex-direction:column;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:70%}.d-modal-title{color:#111827;padding:1.5em;position:relative;width:calc(100% - 4.5em)}.d-modal-content{border-top:1px solid #e0e0e0;overflow:auto;padding:1.5em}.topnav{align-self:flex-end;background-color:#333;border-radius:5px;bottom:5px;float:right;overflow:hidden;right:20px;width:fit-content}.topnav a{color:#f2f2f2;display:block;float:left;font-size:16px;padding:5px 10px;text-align:center;text-decoration:none}.topnav a:hover{cursor:pointer;filter:brightness(55%)}.topnav a.active{background-color:#eaa125;color:#fff}.topnav .icon{display:none}.logo{width:100%}.lbl-wifi{align-self:flex-end}.table{border-collapse:collapse;border-spacing:0;margin:auto;width:90%}.svg{display:flex;margin-right:10px;width:20px}.svg-e{margin-top:5px}.output{color:#fff}.form{padding:10px 0;text-align:center;width:85%}.ctn:after,.ctn:before{content:" ";display:table;grid-column-end:2;grid-column-start:1;grid-row-end:2;grid-row-start:1}.ctn:after{clear:both}.ctn{background-color:hsla(0,0%,100%,.7);border:1px solid;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,.24);display:flex;flex-direction:column;margin:0 auto 10px;max-width:960px;overflow:visible;padding:10px 40px;position:relative}.btn-bar{grid-column-gap:30px;grid-row-gap:20px;display:flex;flex-wrap:wrap;justify-content:center;order:998;padding:20px}.tf-wrapper{align-items:center;flex-direction:column;margin-bottom:10px}.tf-wrapper,.title{display:flex}.heading{margin-right:0;text-align:right;width:100%}.heading-2{color:#0d4869;font-weight:400;margin:10px auto;text-align:center}.toggle{cursor:pointer;display:block;margin:0 0 18px -10px;padding:4px;width:fit-content}.toggle-label{margin:0 20px;position:relative;top:2px}.toggle-switch{background:#ccc;border-radius:16px;display:inline-block;height:32px;position:relative;transition:background .25s;vertical-align:middle;width:58px}.toggle-switch:after,.toggle-switch:before{content:""}.toggle-switch:before{background:linear-gradient(180deg,#fff 0,#eee);border-radius:50%;box-shadow:0 0 0 1px rgba(0,0,0,.25);display:block;height:24px;left:4px;position:absolute;top:4px;transition:left .25s;width:24px}.toggle:hover .toggle-switch:before{background:linear-gradient(180deg,#fff 0,#fff);box-shadow:0 0 0 1px rgba(0,0,0,.5)}.t-check:checked+.toggle-switch{background:#eaa125}.t-check:checked+.toggle-switch:before{left:30px}.t-check{position:absolute;visibility:hidden}.pswd{align-items:center;display:flex;flex-direction:row;justify-content:center;width:100%}.show-hide-wrap{cursor:pointer;position:absolute;right:8%}.firmware{align-items:center;display:flex;flex-direction:column}.fw-upload{background:dimgray;border-radius:5px;color:#fff;cursor:pointer;display:inline-block;margin-bottom:20px;padding:12px 20px}.fw-upload:hover{filter:brightness(85%)}.btn,.submit{min-width:25%}#about{color:#d3d3d3}#esp-ip{display:inline-block;margin-bottom:5px}@media screen and (max-width:991px){.wifi-connect{padding-left:20px;padding-right:20px}}@media screen and (max-width:767px){.wifi-connect{padding-left:10px;padding-right:10px}select{width:93.5%}}@media screen and (max-width:608px){h1{font-size:24px}.title{display:flex;flex-direction:column-start;flex-wrap:wrap}.heading{margin-right:0;padding-bottom:12px;text-align:left;width:100%}.btn-bar{flex-direction:column;margin-top:20px}.topnav{margin-bottom:5px;width:100%}.topnav a{padding:5px 20px}.topnav a:not(.active){display:none}.topnav a.icon{display:block;float:right}.topnav.resp .icon{position:absolute;right:0;top:0}.topnav.resp a{display:block;float:none;text-align:left}.hide-tiny{display:none}.toggle-label{margin:0 5px}.show-hide-wrap{right:4%}}@media screen and (max-width:479px){body{background-color:#fff;padding:2px}select{width:95.5%}.heading-2{margin-top:10px;padding:0}.form{padding:0}.ctn{max-width:100%;padding:0 10px}.row-wrapper{flex-direction:column;gap:0}}.hide{display:none}</style>
</head>
<body>
    <main id=main-box>
        <header class="ctn">	
            <div class=title>		
                <div id=img-logo></div>	
                <div class=heading>
                  <h1 id=name-logo>Air power</h1>
                  <span id=esp-ip></span><br>
                  <span id=esp-mode></span> - v<span id=firmware></span>
                </div>
            </div>
			
            <div class=topnav id=top-nav>
                <span id="nav-link"><a id=set-wifi class="a-link active" data-box="wifi-box">WiFi Setup</a></span>
                <span id="upd-link"><a id=set-update class="a-link" data-box="update-box">Update & FS</a></span>
                <a class="a-link icon" id=hum-btn>
                    <div class=svg style=margin:-2px >
                        <svg id=svg-menu height="16pt" fill=currentColor viewBox="0 0 20 18"></svg>
                    </div>
                </a>
            </div>
        </header>
        <div id=wifi-box class="ctn opt-box">
            <h2 class=heading-2>Connect to WiFi</h2>
            
            <div id=wifi-table class=hide>
                <hr>
                <table class=table>
                    <tbody id=wifi-list></tbody>
                </table>
                <br>
            </div>
            <div id=wifi>
                <div class=tf-wrapper>
                    <label for=ssid class=input-label>SSID</label>
                    <input type=text placeholder="Enter your WiFI SSID name" id="ssid">
                </div>
                <div class=tf-wrapper>
                    <label for=password class=input-label>Password</label>
                    <div class=pswd>
                      <input type=password placeholder="Enter your WiFi password"
                        id=password autocomplete=current-password data-ms-member="password">
                      <span class=show-hide-wrap id=show-hide-password>
                        <a class="show-hide hide" id=show-pass>
                            <div class=svg><svg class=svg-e id=svg-eye viewBox="0 0 24 24"></svg></div>
                        </a>
                        <a class="show-hide" id=hide-pass>
                            <div class=svg><svg class=svg-e id=svg-no-eye viewBox="0 0 24 24"></svg></div>
                        </a>
                      </span>  
                    </div>
                </div>
                <div class="tf-wrapper">
                  <label class="input-label toggle">
                    <input id=no-dhcp type=checkbox class="t-check">
                    <div class=toggle-switch></div>
                    <span class=toggle-label>Manual configuration (no DHCP)</span>
                  </label>
                </div>
                <div class=hide id=conf-wifi> 
                  <div class="tf-wrapper">
                      <label for=ip class=input-label>IP Address</label>
                      <input type=text placeholder="IP Address" id=ip value=192.168.0.10>
                  </div>
                  <div class="tf-wrapper">
                      <label for=gateway class=input-label>Gateway</label>
                      <input type=text placeholder="Gateway address" id=gateway value=192.168.0.1>
                  </div>
                  <div class="tf-wrapper">
                      <label for=subnet class=input-label>Subnet</label>
                      <input type=text placeholder="Subnet mask" id=subnet value="255.255.255.0">
                  </div>
                </div>
                    
                <div class=tf-wrapper>
                  <label class="lbl-wifi toggle">
                    <input id=persistent type=checkbox class="t-check" checked>
                    <div class=toggle-switch></div>
                    <span class=toggle-label>Store WiFi credentials</span>
                  </label>
                </div>
            </div>
            <hr>
            <div class="btn-bar ">
                <a id=scan-wifi class="btn">
                    <div class=svg><svg id=svg-scan fill=currentColor viewBox="0 0 24 24"></svg></div>
                    <span>Scan WiFi networks</span>
                </a>
                <a id=connect-wifi class="btn">
                    <div class=svg><svg id=svg-connect fill=currentColor viewBox="0 0 24 24"></svg></div>
                    <span>Connect to <span id=ssid-name>SSID</span></span>
                </a>
                <a id=save-wifi class="btn hide">
                    <div class=svg><svg id=svg-save2 fill=currentColor viewBox="0 0 24 24"></svg></div>
                    <span>Save configuration</span>
                </a>
            </div>
        </div>

        <div id="update-box" class="ctn opt-box hide">
          <h2 class="heading-2">Update firmware</h2>
          <div class=tf-wrapper>
            <form id=update-form class=form action="/update" method="post" enctype="multipart/form-data">
              <div class=firmware>
                <label for="file-input" id="fw-label" class="fw-upload">Select firmware binary file</label>
                <input id="file-input" type="file"/>
                <a id=update-btn class="btn submit">
                  <div class=svg>
                    <svg fill=currentColor viewBox="0 0 24 24"><path d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z" /></svg>
                  </div>
                  <span>Submit!</span>
                </a><br>
              </div>
            	<div class="progress-wrap hide" id="progress-wrap" data-progress-style="fill-back">
            	  <div id="update-log"></div>
            	  <div class="progress" id='progress-anim'></div>
            	</div>
            </form>
          </div>
          
          <h2 class="heading-2">Load file to fileSystem</h2>
          <div class=tf-wrapper>
            <form class=form action="/edit" method="post" enctype="multipart/form-data">
              <ul id="listing"></ul>
              <label for="picker" id="pick-label" class="fw-upload">Select the folder containing your files</label>
              <input type="file" id="picker" name="fileList" webkitdirectory multiple>
              <p>N.B.: if folder name is <b>"/data"</b>, the files will be uploaded at root "/" level </p>
            </form>
          </div>
        </div>
        <hr id=btn-hr class=hide>
        <div id=btn-box class="btn-bar hide">
            <a id=restart class="btn">
                <div class=svg><svg id=svg-restart fill=currentColor viewBox="0 0 24 24"></svg></div>
                <span>Restart unit</span>
            </a>
            <a id=save-params class="btn">
                <div class=svg><svg id=svg-save fill=currentColor viewBox="0 0 24 24"></svg></div>
                <span>Save configuration</span>
            </a>
        </div>
    </main>
    
    <div class="loader hide" id=loader>
      <div class="loading">Loading...</div>
      <div class="spinH spin-1H"></div>
      <div class="spinH spin-2H"></div>
      <div class="spinH spin-3H"></div>
      <div class="spinH spin-4H"></div>
    </div>
    
    <details id=modal-message>
        <summary></summary>
        <div class=d-modal>
            <div class=d-modal-title><h2 id=message-title>t</h2></div>
            <div class=d-modal-content><p id=message-body></p></div>
            <div class=btn-bar>
                <a id=ok-modal class="btn hide" onclick=closeModal(true)><span>OK</span></a>
                <a id=close-modal class="btn" onclick=closeModal(false)><span>Close</span></a>
            </div>
        </div>
    </details>
    <footer class=foot>
        <hr>
        <a id=about target=_blank rel=noopener></a>
    </footer>
    <script>const svgLogo='<img alt="" src="data:image/webp;base64,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">',svgLock='<svg height="16pt" viewBox="0 0 24 24"><path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z" /></svg>',svgUnlock='<svg height="16pt" viewBox="0 0 24 24"><path d="M18 1C15.24 1 13 3.24 13 6V8H4C2.9 8 2 8.89 2 10V20C2 21.11 2.9 22 4 22H16C17.11 22 18 21.11 18 20V10C18 8.9 17.11 8 16 8H15V6C15 4.34 16.34 3 18 3C19.66 3 21 4.34 21 6V8H23V6C23 3.24 20.76 1 18 1M10 13C11.1 13 12 13.89 12 15C12 16.11 11.11 17 10 17C8.9 17 8 16.11 8 15C8 13.9 8.9 13 10 13Z" /></svg>',svgScan='<path d="M12 20L8.4 15.2C9.4 14.45 10.65 14 12 14S14.6 14.45 15.6 15.2L12 20M4.8 10.4L6.6 12.8C8.1 11.67 9.97 11 12 11S15.9 11.67 17.4 12.8L19.2 10.4C17.19 8.89 14.7 8 12 8S6.81 8.89 4.8 10.4M12 2C7.95 2 4.21 3.34 1.2 5.6L3 8C5.5 6.12 8.62 5 12 5S18.5 6.12 21 8L22.8 5.6C19.79 3.34 16.05 2 12 2M7 24H9V22H7V24M15 24H17V22H15V24M11 24H13V22H11V24Z" />',svgConnect='<path d="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z" />',svgSave='<path d="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z" />',svgRestart='<path d="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z" />',svgEye='<path d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z" />',svgNoEye='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>',svgMenu='<path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"/>';var configFile,lastBox,closeCb=function(){},port=location.port||("https:"===window.location.protocol?"443":"80"),esp=`${window.location.protocol}//${window.location.hostname}:${port}/`,options={},$=function(e){return document.getElementById(e)};function hide(e){$(e).classList.add("hide")}function show(e){$(e).classList.remove("hide")}function newEl(e,t){var n=document.createElement(e);if("object"==typeof t)for(var i in t)n.setAttribute(i,t[i]);return n}function getParameters(){var e;show("loader"),fetch(esp+"getStatus").then((e=>e.json())).then((t=>{$("esp-mode").innerHTML=t.mode,$("esp-ip").innerHTML=`<a href="${esp}">${esp}</a>`,$("firmware").innerHTML=t.firmware,$("about").innerHTML="Created with "+t.liburl,$("about").setAttribute("href",t.liburl),configFile=t.path,fetch(esp+configFile).then((e=>e.json())).then((t=>{for(const n in t)if(t.hasOwnProperty(n)){if("name-logo"===n){$("name-logo").innerHTML=t[n].replace(/(<([^>]+)>)/gi,""),document.title=t[n].replace(/(<([^>]+)>)/gi,""),delete t[n];continue}if("img-logo"==n){e=t[n],delete t[n];continue}}e&&fetch(e).then((e=>e.text())).then((t=>setLogoBase64(e,t))),createOptionsBox(options=t),hide("loader")}))}))}function setLogoBase64(e,t){var n=e.replace(/[^\d_]/g,"").split("_"),i=newEl("img",{class:"logo",src:"data:image/png;base64, "+t,style:`width:${n[0]}px;height:${n[1]}px`});$("img-logo").innerHTML="",$("img-logo").append(i),$("img-logo").setAttribute("type","number"),$("img-logo").setAttribute("title","")}function addOptionsElement(e){const t=Object.keys(e).filter((t=>"boolean"==typeof e[t])).reduce(((t,n)=>(t[n]=e[n],t)),{});if(0!==Object.entries(t).length){var n=newEl("div",{class:"row-wrapper"});Object.entries(t).forEach((([e,t])=>{let i=newEl("label",{class:"input-label toggle"}),s=newEl("input",{class:"t-check opt-input",type:"checkbox",id:e});s.checked=t;let a=newEl("div",{class:"toggle-switch"}),o=newEl("span",{class:"toggle-label"});o.textContent=e,i.appendChild(s),i.appendChild(a),i.appendChild(o),addInputListener(s),n.appendChild(i)})),lastBox.appendChild(n)}const i=Object.keys(e).filter((t=>"boolean"!=typeof e[t])).reduce(((t,n)=>(t[n]=e[n],t)),{});Object.entries(i).forEach((([e,t])=>{let n=newEl("label",{class:"input-label","label-for":e});n.textContent=e;let i=newEl("input",{class:"opt-input",type:"text",id:e});if(i.value=t,"number"==typeof t&&i.setAttribute("type","number"),"object"==typeof t)if(t.values)i=newEl("select",{id:e}),t.values.forEach((e=>{var t=newEl("option");t.textContent=e,t.value=e,i.appendChild(t)})),i.value=t.selected,lastBox.appendChild(i);else{var s=Math.round(t.value*(1/t.step))/(1/t.step);i.setAttribute("type","number"),i.setAttribute("step",t.step),i.setAttribute("min",t.min),i.setAttribute("max",t.max),i.value=Number(s).toFixed(3)}addInputListener(i);var a=newEl("div",{class:"tf-wrapper"});a.appendChild(n),a.appendChild(i),lastBox.appendChild(a),e.endsWith("-hidden")&&a.classList.add("hide")}))}function createNewBox(e,t){var n=newEl("div",{class:"ctn opt-box hide",id:"option-box"+e}),i=newEl("h2",{class:"heading-2"});i.innerHTML=t,n.appendChild(i),$("main-box").appendChild(n);var s=newEl("a",{class:"a-link",id:"set-opt"+e,"data-box":"option-box"+e});return s.innerHTML=t,s.addEventListener("click",switchPage),$("nav-link").appendChild(s),n}async function createOptionsBox(e){var t={},n="wifi-box";lastBox=$(n),Object.entries(e).forEach((([i,s],a)=>{if("wifi-box"===n&&($("no-dhcp").checked=e.dhcp,$("ip").value=e.ip_address,$("gateway").value=e.gateway,$("subnet").value=e.subnet,$("no-dhcp").checked&&(show("conf-wifi"),show("save-wifi"))),i.startsWith("param-box"))addOptionsElement(t),lastBox=createNewBox(a,s),t={},n=s;else if("wifi-box"!=n){var o=!1;if(i.startsWith("img-logo")||i.startsWith("name-logo"))o=!0;else if(i.startsWith("raw-css")){var r=newEl("link",{rel:"stylesheet",href:s});document.head.appendChild(r),o=!0}else if(i.startsWith("raw-javascript")){var d=newEl("script",{src:s});document.body.appendChild(d),o=!0}else if(i.startsWith("raw-html")){var l=newEl("div",{class:"tf-wrapper raw-html",id:s,"data-box":lastBox.id});lastBox.appendChild(l),fetch(s).then((e=>e.text())).then((e=>$(s).innerHTML=e)),o=!0}o||(t[i]=s)}})),0!==Object.entries(t).length&&addOptionsElement(t)}function addInputListener(e){"number"!==e.type?"text"!==e.type?"checkbox"!==e.type?"select-one"!==e.type||e.addEventListener("change",(e=>{options[e.target.id].selected=e.target.value})):e.addEventListener("change",(()=>{options[e.id]=e.checked})):e.addEventListener("change",(()=>{options[e.id]=e.value})):e.addEventListener("change",(()=>{if(e.getAttribute("step")){var t={};t.value=Math.round(e.value*(1/e.step))/(1/e.step),t.step=e.getAttribute("step"),t.min=e.getAttribute("min"),t.max=e.getAttribute("max"),options[e.id]=t}else options[e.id]=parseInt(e.value)}))}function insertKey(e,t,n,i){return Object.keys(n).reduce(((s,a,o)=>(o===i&&(s[e]=t),s[a]=n[a],s)),{})}function saveParameters(){Object.keys(options)[0].startsWith("param-box")&&("param-box0"===Object.keys(options)[0]?(options["param-box-0"]=options["wifi-box"],options={dhcp:!1,...options}):options={"wifi-box":"",dhcp:!1,...options}),options.dhcp=$("no-dhcp").checked,$("no-dhcp").checked&&(options=insertKey("ip_address",$("ip").value,options,2),options=insertKey("gateway",$("gateway").value,options,3),(options=insertKey("subnet",$("subnet").value,options,4)).ip_address=$("ip").value,options.gateway=$("gateway").value,options.subnet=$("subnet").value);var e=new Blob([JSON.stringify(options,null,2)],{type:"application/json"}),t=new FormData;t.append("data",e,"/"+configFile),fetch("/edit",{method:"POST",body:t}).then((e=>e.text())).then((e=>{openModal("Save options",'<br><b>"/'+configFile+'"</b> saved successfully on flash memory!<br><br>')}))}function showHidePassword(){var e=$("password");"password"===e.type?(e.type="text",show("show-pass"),hide("hide-pass")):(e.type="password",hide("show-pass"),show("hide-pass"))}function getWiFiList(){show("loader"),fetch(esp+"scan").then((e=>e.json())).then((e=>{listWifi(e),hide("loader")}))}function selectWifi(e){try{$("select-"+e.target.parentNode.id).checked=!0}catch(t){$(e.target.id).checked=!0}$("ssid").value=this.cells[1].innerHTML,$("ssid-name").innerHTML=this.cells[1].innerHTML,$("password").focus()}function listWifi(e){e.hasOwnProperty("reload")&&setTimeout(getWiFiList,2e3),e.sort(((e,t)=>t.strength-e.strength));const t=document.querySelector("#wifi-list");t.innerHTML="",e.forEach(((e,n)=>{var i=newEl("tr"),s="wifi-"+n;i.id=s,i.addEventListener("click",selectWifi),i.innerHTML=`<td><input type="radio" name="select" id="select-${s}"></td>`,i.innerHTML+=`<td id="ssid-${s}">${e.ssid}</td>`,i.innerHTML+='<td class="hide-tiny">'+e.strength+" dBm</td>",i.innerHTML+=e.security?"<td>"+svgLock+"</td>":"<td>"+svgUnlock+"</td>",t.appendChild(i)})),show("wifi-table")}function doConnection(e,t){if(""!==$("ssid").value&&""!==$("password").value){var n=new FormData;n.append("ssid",$("ssid").value),n.append("password",$("password").value),n.append("persistent",$("persistent").checked),void 0!==t&&n.append("newSSID",!0),$("no-dhcp").checked&&(n.append("ip_address",$("ip").value),n.append("gateway",$("gateway").value),n.append("subnet",$("subnet").value));var i,s={method:"POST",body:n,redirect:"follow"};show("loader"),fetch("/connect",s).then((function(e){return i=e.status,e.text()})).then((function(t){200===i?t.includes("already")?openModal("Connect to WiFi",t,(()=>{doConnection(e,!0)})):openModal("Connect to WiFi",t,restartESP):openModal("Error!",t),hide("loader")})).catch((e=>{openModal("Connect to WiFi",e),hide("loader")}))}else openModal("Connect to WiFi","Please insert a SSID and a Password")}function switchPage(e){if($("top-nav").classList.remove("resp"),document.querySelectorAll("a").forEach((e=>{e.classList.remove("active")})),e.target.classList.add("active"),document.querySelectorAll(".opt-box").forEach((e=>{e.classList.add("hide")})),show(e.target.getAttribute("data-box")),"set-wifi"!=e.target.id){var t=document.createDocumentFragment();t.appendChild($("btn-hr")),t.appendChild($("btn-box"));const n=$(e.target.getAttribute("data-box"));n.appendChild(t),document.querySelectorAll(".raw-html").forEach((function(e){e.getAttribute("data-box")===n.id&&n.insertBefore(e,$("btn-hr"))})),show("btn-box"),show("btn-hr")}else hide("btn-box"),hide("btn-hr")}function showMenu(){$("top-nav").classList.add("resp")}function openModal(e,t,n,i){$("message-title").innerHTML=e,$("message-body").innerHTML=t,$("modal-message").open=!0,$("main-box").style.filter="blur(3px)",void 0!==n?(closeCb=n,show("ok-modal")):hide("ok-modal")}function closeModal(e){$("modal-message").open=!1,$("main-box").style.filter="",void 0!==closeCb&&e&&closeCb()}function restartESP(){fetch(esp+"reset").then((e=>e.text())).then((e=>{closeModal(),openModal("Restart!","<br>ESP restarted!")}))}function handleSubmit(){let e=$("file-input");if(0===e.files.length)return void alert("please choose a file");var t=$("update-log");$("loader"),$("progress-wrap");show("loader"),show("progress-wrap"),$("progress-wrap").classList.add("active"),t.innerHTML="Update in progress";let n=new FormData;n.set("update",e.files[0]);var i=new XMLHttpRequest;i.open("POST","/update?size="+e.files[0].size),i.onload=function(e){hide("loader"),$("progress-wrap").classList.remove("active"),t.innerHTML=200!=i.status?`Error ${i.status}: ${i.statusText}`:i.response},i.upload.addEventListener("progress",(e=>{let n=Math.round(e.loaded/e.total*100)+"%";e.lengthComputable&&($("progress-anim").style.width=n,t.innerHTML="Update in progress: "+n)})),i.send(n)}async function uploadFolder(e){let t=$("listing");for(let i of Array.from(e.target.files)){let e=i.webkitRelativePath,s=newEl("li");s.textContent=e,t.appendChild(s);var n=new FileReader;n.onload=function(t){e.startsWith("data/")&&(e=e.replace("data/",""));var n=new FormData;n.set("data",i,"/"+e),fetch("/edit",{method:"POST",body:n}).then((e=>e.text()))},n.readAsText(i)}}$("svg-menu").innerHTML=svgMenu,$("svg-eye").innerHTML=svgEye,$("svg-no-eye").innerHTML=svgNoEye,$("svg-scan").innerHTML=svgScan,$("svg-connect").innerHTML=svgConnect,$("svg-save").innerHTML=svgSave,$("svg-save2").innerHTML=svgSave,$("svg-restart").innerHTML=svgRestart,$("img-logo").innerHTML=svgLogo,$("hum-btn").addEventListener("click",showMenu),$("scan-wifi").addEventListener("click",getWiFiList),$("connect-wifi").addEventListener("click",doConnection),$("save-params").addEventListener("click",saveParameters),$("save-wifi").addEventListener("click",saveParameters),$("show-hide-password").addEventListener("click",showHidePassword),$("set-wifi").addEventListener("click",switchPage),$("set-update").addEventListener("click",switchPage),$("about").addEventListener("click",switchPage),$("restart").addEventListener("click",restartESP),$("picker").addEventListener("change",uploadFolder),$("update-btn").addEventListener("click",handleSubmit),$("file-input").addEventListener("change",(()=>{$("fw-label").innerHTML=$("file-input").files.item(0).name+" ("+$("file-input").files.item(0).size+" bytes)",$("fw-label").style.background="brown"})),$("no-dhcp").addEventListener("change",(function(){this.checked?(show("conf-wifi"),show("save-wifi")):hide("conf-wifi")})),window.addEventListener("load",getParameters);</script>
</body>
</html>